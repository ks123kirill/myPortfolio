!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),o}}();const pageBody=document.querySelector(".page-body");$modal=function(t){var e,o,s,i=!1,n=!1;function a(){i=!0,e.classList.remove("modal__show"),e.classList.add("modal__hiding"),setTimeout((function(){e.classList.remove("modal__hiding"),i=!1}),500),document.dispatchEvent(s),pageBody.classList.remove("page-body--no-scroll")}function l(t){"modal"===t.target.dataset.dismiss&&a()}return(e=function(t){var e,o=document.createElement("div"),s="";if(o.classList.add("modal"),e=(e='<div class="modal__backdrop" data-dismiss="modal"><div class="modal__content"><div class="modal__header"><div class="modal__title" data-modal="title">{{title}}</div><span class="modal__btn-close" data-dismiss="modal" title="Закрыть">×</span></div><div class="modal__body" data-modal="content">{{content}}</div>{{footer}}</div></div>'.replace("{{title}}",t.title||"Новое окно")).replace("{{content}}",t.content||""),t.footerButtons){for(var i=0,n=t.footerButtons.length;i<n;i++){var a='<button type="button" class="{{button_class}}" data-handler={{button_handler}}>{{button_text}}</button>'.replace("{{button_class}}",t.footerButtons[i].class);s+=a=(a=a.replace("{{button_handler}}",t.footerButtons[i].handler)).replace("{{button_text}}",t.footerButtons[i].text)}s='<div class="modal__footer">{{buttons}}</div>'.replace("{{buttons}}",s)}return e=e.replace("{{footer}}",s),o.innerHTML=e,document.body.appendChild(o),o}(t||{})).addEventListener("click",l),o=new CustomEvent("show.modal",{detail:e}),s=new CustomEvent("hide.modal",{detail:e}),{show:function(){n||i||(e.classList.add("modal__show"),document.dispatchEvent(o),pageBody.classList.add("page-body--no-scroll"))},hide:a,destroy:function(){e.parentElement.removeChild(e),e.removeEventListener("click",l),n=!0},setContent:function(t){e.querySelector('[data-modal="content"]').innerHTML=t},setTitle:function(t){e.querySelector('[data-modal="title"]').innerHTML=t}}};const lastProjectsList={pink:{title:"Pink",description:"Приложение для раскрашивания фотографий",specification:["Верстка 3х страниц","HTML5, CSS3, mobile first, responsive design","Методология: БЭМ","Препроцессор: Less","Сборщик: Gulp"],demo:"https://ks123kirill.github.io/pink/",repo:"https://github.com/ks123kirill/pink",img:"img/pink.png"},bikes:{title:"Bikes",description:"Магазин по продаже крутых велосипедов",specification:["Верстка 1 страницы","HTML5, CSS3, desktop first, responsive design","Методология: БЭМ","Препроцессор: Sass","Сборщик: Gulp"],demo:"https://ks123kirill.github.io/bikes/",repo:"https://github.com/ks123kirill/bikes",img:"img/bikes.png"},keksobooking:{title:"Keksobooking",description:"Cервис размещения объявлений о сдаче в аренду недвижимости",specification:["Разработка веб-интерфейса","Использование модулей ECMAScript","Использование Fetch API","Использование Leaflet API - картографический сервис","Валидация формы"],demo:"https://ks123kirill.github.io/keksobooking/",repo:"https://github.com/ks123kirill/keksobooking",img:"img/keksobooking.png"}};var modal=$modal(),modalsCollection=document.querySelectorAll(".last-works__button");function focusContol(){const t=this.openedWindow.querySelectorAll(this._focusElements);this.isOpened&&this.starter?this.starter.focus():t.length&&t[0].focus()}function focusCatcher(t){const e=this.openedWindow.querySelectorAll(this._focusElements),o=Array.prototype.slice.call(e);if(this.openedWindow.contains(document.activeElement)){const e=o.indexOf(document.activeElement);t.shiftKey&&0===e&&(o[o.length-1].focus(),t.preventDefault()),t.shiftKey||e!==o.length-1||(o[0].focus(),t.preventDefault())}else o[0].focus(),t.preventDefault()}this._focusElements=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],modalsCollection.forEach((t=>{t.addEventListener("click",(function(e){const o=t.dataset.projectName;modal.setTitle(lastProjectsList[o].title),modal.setContent(`<p class="last-works__description">${lastProjectsList[o].description}</p>\n      <p class="last-works__heading">Описание:</p>\n      <ul class="last-works__specification">\n        <li>${lastProjectsList[o].specification[0]}</li>\n        <li>${lastProjectsList[o].specification[1]}</li>\n        <li>${lastProjectsList[o].specification[2]}</li>\n        <li>${lastProjectsList[o].specification[3]}</li>\n        <li>${lastProjectsList[o].specification[4]}</li>\n      </ul>\n      <a class="last-works__link last-works__link--demo" href="${lastProjectsList[o].demo}" target="_blank" rel="noopener noreferrer" tabindex=1;>Посмотреть демо</a>\n      <a class="last-works__link last-works__link--repo" href="${lastProjectsList[o].repo}" target="_blank" rel="noopener noreferrer" tabindex=1;>Посмотреть репозиторий</a>`),modal.show(),focusContol(),focusCatcher(e),window.addEventListener("keydown",(function(t){27===t.keyCode&&pageBody.classList.contains("page-body--no-scroll")&&(t.preventDefault(),modal.hide())}))}))}));