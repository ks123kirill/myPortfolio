const form=document.getElementById("form");async function formSend(e){e.preventDefault();let r=formValidate(form),o=new FormData(form);if(0===r){form.classList.add("_sending");let e=await fetch("sendMail.php",{method:"POST",body:o});if(e.ok){await e.json();form.reset,form.classList.remove("_sending")}else alert("ошибка"),form.classList.remove("_sending")}else alert("Заполните поля")}function formValidate(e){let r=0,o=document.querySelectorAll("._req");for(let e=0;e<o.length;e++){const t=o[e];formRemoveError(t),t.classList.contains("_email")?emailTest(t)&&(formAddError(t),r++):""===t.value&&(formAddError(t),r++)}return r}function formAddError(e){e.classList.add("_error")}function formRemoveError(e){e.classList.remove("_error")}function emailTest(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}form.addEventListener("submit",formSend);